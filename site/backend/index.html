
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../frontend/">
      
      
        <link rel="next" href="../database/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Backend - Big Beill's Greenhouse</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#backend-design" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Big Beill&#39;s Greenhouse" class="md-header__button md-logo" aria-label="Big Beill's Greenhouse" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Big Beill's Greenhouse
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Backend
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Big Beill&#39;s Greenhouse" class="md-nav__button md-logo" aria-label="Big Beill's Greenhouse" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Big Beill's Greenhouse
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../frontend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Frontend
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Backend
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Backend
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#backend-objects-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      Backend Objects Documentation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Backend Objects Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#allowed-json-structures" class="md-nav__link">
    <span class="md-ellipsis">
      Allowed JSON Structures
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#router-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      Router Documentation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Router Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authentication-routes" class="md-nav__link">
    <span class="md-ellipsis">
      /authentication Routes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingredient-routes" class="md-nav__link">
    <span class="md-ellipsis">
      /ingredient Routes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recipe-routes" class="md-nav__link">
    <span class="md-ellipsis">
      /recipe Routes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-routes" class="md-nav__link">
    <span class="md-ellipsis">
      /user Routes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../database/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Database
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#backend-objects-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      Backend Objects Documentation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Backend Objects Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#allowed-json-structures" class="md-nav__link">
    <span class="md-ellipsis">
      Allowed JSON Structures
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#router-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      Router Documentation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Router Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authentication-routes" class="md-nav__link">
    <span class="md-ellipsis">
      /authentication Routes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingredient-routes" class="md-nav__link">
    <span class="md-ellipsis">
      /ingredient Routes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recipe-routes" class="md-nav__link">
    <span class="md-ellipsis">
      /recipe Routes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-routes" class="md-nav__link">
    <span class="md-ellipsis">
      /user Routes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="backend-design">Backend Design<a class="headerlink" href="#backend-design" title="Permanent link">&para;</a></h1>
<p>Framework used: <strong>Express JS</strong></p>
<p>This project uses RESTful API's for communication between client and server. Additionally, developers working on the backend are required to follow strict variable naming convention rules.</p>
<h2 id="backend-objects-documentation">Backend Objects Documentation<a class="headerlink" href="#backend-objects-documentation" title="Permanent link">&para;</a></h2>
<p>The backend keeps data organized by requiring all variables ending with "Object" to match one of the following JSON structures. </p>
<h3 id="allowed-json-structures">Allowed JSON Structures<a class="headerlink" href="#allowed-json-structures" title="Permanent link">&para;</a></h3>
<p>Any JSON object with one of the listed names must match the structure underneath</p>
<h4 id="foodgroupobject">foodGroupObject<a class="headerlink" href="#foodgroupobject" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">   </span><span class="nx">foodGroupId</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span><span class="w"> </span><span class="c1">//primary key</span>
<span class="w">   </span><span class="nx">foodGroupName</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="ingredientobject">ingredientObject<a class="headerlink" href="#ingredientobject" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">   </span><span class="nx">foodId</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span><span class="w"> </span><span class="c1">//primary key</span>
<span class="w">   </span><span class="nx">foodDescription</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">,</span>
<span class="w">   </span><span class="nx">portion</span><span class="o">?:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">measureId</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span>
<span class="w">      </span><span class="nx">measureDescription</span><span class="o">?:</span><span class="w"> </span><span class="nx">string</span><span class="p">,</span>
<span class="w">      </span><span class="nx">amount</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nx">nutrition</span><span class="o">?:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">calories</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span>
<span class="w">      </span><span class="nx">fat</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span>
<span class="w">      </span><span class="nx">cholesterol</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span>
<span class="w">      </span><span class="nx">sodium</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span>
<span class="w">      </span><span class="nx">potassium</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span>
<span class="w">      </span><span class="nx">carbohydrates</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span>
<span class="w">      </span><span class="nx">fibre</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span>
<span class="w">      </span><span class="nx">sugar</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span>
<span class="w">      </span><span class="nx">protein</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="conversionobject">conversionObject<a class="headerlink" href="#conversionobject" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">   </span><span class="nx">measureId</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span>
<span class="w">   </span><span class="nx">measureDescription</span><span class="o">?:</span><span class="w"> </span><span class="nx">string</span><span class="p">,</span>
<span class="w">   </span><span class="nx">conversionFactorValue</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="recipeobject">recipeObject<a class="headerlink" href="#recipeobject" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">   </span><span class="nx">_id</span><span class="o">:</span><span class="w"> </span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">SchemaTypes</span><span class="p">.</span><span class="nx">ObjectId</span><span class="p">,</span>
<span class="w">   </span><span class="nx">owner</span><span class="o">:</span><span class="w"> </span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">SchemaTypes</span><span class="p">.</span><span class="nx">ObjectId</span><span class="p">,</span>
<span class="w">   </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">,</span>
<span class="w">   </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">,</span>
<span class="w">   </span><span class="nx">image</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">,</span><span class="w"> </span><span class="c1">// to be changed</span>
<span class="w">   </span><span class="nx">ingredients</span><span class="o">:</span><span class="w"> </span><span class="nb">Array</span><span class="o">&lt;</span><span class="nx">ingredientObject</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="c1">// must include portion and nutrient field </span>
<span class="w">   </span><span class="nx">instructions</span><span class="o">:</span><span class="w"> </span><span class="nb">Array</span><span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">   </span><span class="nx">nutrition</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">calories</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span>
<span class="w">      </span><span class="nx">fat</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span>
<span class="w">      </span><span class="nx">cholesterol</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span>
<span class="w">      </span><span class="nx">sodium</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span>
<span class="w">      </span><span class="nx">potassium</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span>
<span class="w">      </span><span class="nx">carbohydrates</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span>
<span class="w">      </span><span class="nx">fibre</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span>
<span class="w">      </span><span class="nx">sugar</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span>
<span class="w">      </span><span class="nx">protein</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="userobject">userObject<a class="headerlink" href="#userobject" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">   </span><span class="nx">_id</span><span class="o">:</span><span class="w"> </span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">SchemaTypes</span><span class="p">.</span><span class="nx">ObjectId</span><span class="p">,</span>
<span class="w">   </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">,</span>
<span class="w">   </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">,</span>
<span class="w">   </span><span class="nx">bio</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">,</span>
<span class="w">   </span><span class="nx">relationship</span><span class="o">?:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// relationship with given target (usually current signed in user)</span>
<span class="w">      </span><span class="nx">_id</span><span class="o">:</span><span class="w"> </span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">SchemaTypes</span><span class="p">.</span><span class="nx">ObjectId</span><span class="p">,</span>
<span class="w">      </span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">SchemaTypes</span><span class="p">.</span><span class="nx">ObjectId</span><span class="p">,</span>
<span class="w">      </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="w"> </span><span class="c1">// 0 = no relationship, 1 = friends, 2 = received friend request, 3 sent friend request, 4 = self</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="userfolderobject">userFolderObject<a class="headerlink" href="#userfolderobject" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">   </span><span class="nx">_id</span><span class="o">:</span><span class="w"> </span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">SchemaTypes</span><span class="p">.</span><span class="nx">ObjectId</span><span class="p">,</span>
<span class="w">   </span><span class="nx">folders</span><span class="o">:</span><span class="w"> </span><span class="nb">Array</span><span class="o">&lt;</span><span class="nx">userFolderObject</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">SchemaTypes</span><span class="p">.</span><span class="nx">ObjectId</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">   </span><span class="nx">users</span><span class="o">:</span><span class="w"> </span><span class="nb">Array</span><span class="o">&lt;</span><span class="nx">userObject</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">SchemaTypes</span><span class="p">.</span><span class="nx">ObjectId</span><span class="o">&gt;</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="router-documentation">Router Documentation<a class="headerlink" href="#router-documentation" title="Permanent link">&para;</a></h2>
<p>There are 4 routers the client can utilize:</p>
<ul>
<li>Authentication router</li>
<li>Ingredient router</li>
<li>Recipe router</li>
<li>User router</li>
</ul>
<h3 id="authentication-routes">/authentication Routes<a class="headerlink" href="#authentication-routes" title="Permanent link">&para;</a></h3>
<p>The authentication router is used for managing a clients access to a user token</p>
<h4 id="register">/register<a class="headerlink" href="#register" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Type:
   POST - Registers a new user

Expects 3 arguments in body:
   username: string
   email: string
   password: string

Route description:
   - Checks if the username or email is already registered
   - Salts and hashes the password
   - Creates a user object and saves it to the database
   - Creates JSON Web Token cookies and sends them to the client

Returns:
   - 201 user was successfully registered
   - 400 invalid or missing arguments
   - 409 username or email is already registered
</code></pre></div>
<h4 id="login">/login<a class="headerlink" href="#login" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Type:
   POST - Logs user in

Expects 3 arguments in body:
   username: string
   password: string
   rememberMe: boolean

Route description:
   - Retrieves user data from the database
   - Verifies the password matches the hashed password
   - Creates JWT cookies and sends them to the client
   - If rememberMe is true, sets cookie max-age to 30 days

Returns:
   - 200 user verified and cookies sent
   - 400 invalid or missing arguments
   - 401 username or password is incorrect
</code></pre></div>
<h4 id="refresh">/refresh<a class="headerlink" href="#refresh" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Type:
   POST - Issues a new user token

Expects 0 arguments in body

Route description:
   - Checks validity of refresh tokens in the client’s cookies
   - Creates and sends a new user token

Returns:
   - 200 new user token sent
   - 400 arguments were provided
   - 401 no valid refresh token was found
</code></pre></div>
<h4 id="logout">/logout<a class="headerlink" href="#logout" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Type:
   POST - Logs the current user out

Expects 0 arguments in body

Route description:
   - Removes all cookies from the client’s browser

Returns:
   - 200 cookies successfully removed
   - 400 arguments were provided with this request
</code></pre></div>
<h3 id="ingredient-routes">/ingredient Routes<a class="headerlink" href="#ingredient-routes" title="Permanent link">&para;</a></h3>
<p>The ingredient router is used to manage the clients access to any ingredient related objects inside the database</p>
<h4 id="getobjectfoodidmeasureidamount">/getObject/:foodId/:measureId?/:amount?<a class="headerlink" href="#getobjectfoodidmeasureidamount" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Type:
   GET - Returns a completed ingredient object

Expects 3 arguments in params:
   foodId: number
   measureId: number (optional)
   amount: number (optional)

Route description
   - Grabs ingredientObject for foodID from the database
   - If both measureId and amount have been provided, attach nutrition field to the ingredientObject
   - Returns ingredientObject to client

Returns:
   - 200 ingredientObject returned
   - 400 invalid or missing arguments

payload: IngredientObject
</code></pre></div>
<h4 id="list">/list<a class="headerlink" href="#list" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Type:
   GET - returns a list of ingredientObjects

Expects 4 arguments in query:
   foodDescription: string (optional)
   foodGroupId: string (optional)
   skip: number (optional, default 0)
   limit: number (optional, default 15)

Route description:
   - Collects a list of ingredientObjects from the postgres database
   - List will skip over the first {skip} number of results
   - List will be limited to {limit} number of results
   - Convert the contents of the list into an ingredientObject array

Returns:
   - 200 ingredientObject array returned
   - 400 Invalid arguments

payload: {
   ingredientObjectArray: ingredientObject[],
   count: number
}
</code></pre></div>
<h4 id="conversionoptionsfoodid">/conversionOptions/:foodId<a class="headerlink" href="#conversionoptionsfoodid" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Type:
   GET - returns a list of conversion options for a given foodId

Expects 1 argument in params:
   foodId: number

Route description:
   - Gathers a list of all conversion types associated with the foodId

Returns:
   - 200 conversionObject array
   - 400 invalid or missing arguments

payload: conversionObject[]
</code></pre></div>
<h4 id="groups">/groups<a class="headerlink" href="#groups" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Type:
   GET - returns a list of all food groups inside postgres

Expects 0 arguments in query

Method &#39;GET&#39; description:
   - Gathers a list of all food groups inside the postgres database

Method &#39;GET&#39; returns:
   - 200 foodGroupObject array returned
   - 400 arguments were provided with this request

payload: foodGroupObject[]
</code></pre></div>
<h3 id="recipe-routes">/recipe Routes<a class="headerlink" href="#recipe-routes" title="Permanent link">&para;</a></h3>
<p>The recipe router is used to manage the clients access to any recipe related objects inside the database</p>
<h4 id="getobjectrecipeidincludenutrition">/getObject/:recipeId/:includeNutrition?<a class="headerlink" href="#getobjectrecipeidincludenutrition" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Type:
   GET - returns a completed recipe object

Expects 1 argument from params:
   recipeId: integer
   includeNutrition: boolean (optional, default false)

Route description:
   - Builds a completed recipeObject using the recipeId provided
   - Checks to make sure the client has read access to the recipe
   - If includeNutrition is true, attaches the nutrition field to the recipeObject
   - Returns the competed recipe object

Returns:
   - 200 recipeObject returned
   - 400 invalid or missing arguments
   - 401 client is attempting to access a private recipeObject without an access token
   - 403 client does not have read access to recipeObject being requested

payload: recipeObject
</code></pre></div>
<h4 id="find">/find<a class="headerlink" href="#find" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Type: 
   GET - returns a list of recipes from the database

Expects 6 arguments from query:
   category: enum[&quot;public&quot;, &quot;friends&quot;, &quot;personal&quot;] (optional, default &quot;public&quot;)
   title: string (optional)
   ingredients: number[] (optional)
   limit: number (optional, default 6)
   skip: number (optional, default 0)
   count: boolean (optional, default false)
   includeNutrition: boolean (optional, default false)
Route description:
   - Collect a list of recipeObjects based on title and ingredients provided
   - Skip the first {skip} number or recipeObjects found
   - Limit the list to {limit} number of recipeObjects
   - If {includeNutrition} is true, attach the nutrition field to each recipeObject
   - Return the list to the client
   - If {count} is true, also return the total number of recipeObjects that match search criteria

Returns:
   - 200 recipeObject array returned
   - 400 invalid or missing arguments
   - 401 client is attempting to use a category other than &quot;all&quot; without an access token

payload: {
   recipeObjectArray: recipeObject[], 
   count: number
}
</code></pre></div>
<h4 id="edit">/edit<a class="headerlink" href="#edit" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Type:
   POST - Creates a new recipe in the database
   PUT - Makes changes to an already existing recipe in the databases

Expects 6 arguments from body:
   _id: mongoose.SchemaTypes.ObjectId (Only for PUT method)
   title: string
   description: string
   image: string
   ingredients: ingredientObject[]
   instructions: string[]

Route Description:
   - Packages arguments into a single json object
   - Checks the json object to make sure it forms a valid RecipeObject
   - If using POST method, saves the recipeObject to the database with current user as the recipe owner
   - If using PUT method, checks to make sure client has write pillages for recipe with _id provided
   - If using PUT method, replaces contents of the recipeObject in database with contents of the new recipeObject

Returns: 
   - 201 recipe was added/changed in the database
   - 400 invalid or missing arguments
   - 401 client did not provide a valid access token
   - 403 client does not have write access to the recipeObject
</code></pre></div>
<h3 id="user-routes">/user Routes<a class="headerlink" href="#user-routes" title="Permanent link">&para;</a></h3>
<p>The user router is used to manage the clients access to any user related objects inside the database</p>
<h4 id="getobjectuseridrelationship">/getObject/:userId?/:relationship?<a class="headerlink" href="#getobjectuseridrelationship" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Type:
   GET - return a userObject from the database

Expects 2 arguments from params:
   userId: mongoose object id (optional)
   relationship: boolean (optional, default false)

Route Description:
   - Gets a userObject based on userId provided
   - If userId is not provided, get the userObject associated with the current signed in user
   - If {relationship} is true, attach the relationship field to the userObject
   - Reminder: the relationship field represents how the userObject feels about the current user

Returns:
   - 200 userObject returned
   - 400 invalid arguments
   - 401 userId and access token missing or relationship was requested without an access token

payload: userObject
</code></pre></div>
<h4 id="find_1">/find<a class="headerlink" href="#find_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Type:
   GET - return a list of users from the database

Expects 6 arguments from query:
   username: string (optional)
   email: string (optional)
   limit: number (optional, default 6)
   skip: number (optional, default 0)
   relationship: number (optional)
   count: boolean (optional, default false)

Route description:
   - Collects a list of all users in the database that contain {username} and {email}
   - If relationship field exists, only include userObjects that the current user has the given relationship with
   - Reminder: 1 = friends, 2 = received friend requests, 3 = sent friend requests
   - Skip over the first {skip} number of results found
   - Limit the list size to the {limit} number of objects
   - Return the list to the client
   - If {count} is true, return the total number of items matching search criteria alongside count

Returns: 
   - 200 userObject array returned
   - 400 missing or invalid arguments
   - 401 relationship filed exists but no access token found

payload: {
   userObjectArray: userObject[]
   count: number
}
</code></pre></div>
<h4 id="folder">/folder<a class="headerlink" href="#folder" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Type: 
   GET - return a list of folders from the database

Expects 4 arguments from query:
   folderId: mongoose object id (optional)
   skip: number (optional, default 0)
   limit: number (optional, default 6)
   count: boolean (optional, default false)

Route description:
   - If folderId does not exits, Collects a list of all folders owned by the current user
   - If folderId field exists, Collect a list of all folders that have {folderId} in the parent folder field
   - Skip the first {skip} number of folderObjects
   - Limit the list to the {limit} number of folders
   - Return list to client
   - If count is true, return the number of folderObjects that meet search criteria

Returns:
   - 200 folderObject array returned
   - 400 invalid arguments
   - 401 access token could not be found

payload: {
   folderObjectArray: folderObject[]
   count: number
}
</code></pre></div>
<h4 id="updateaccount">/updateAccount<a class="headerlink" href="#updateaccount" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Type:
   POST - change the userObject saved in the database for current user

Expects 3 arguments from body:
   username: string
   email: string
   bio: string (optional)

Route description:
   - Make sure the username or email doesn&#39;t already exist in database
   - Update usersObject associated with the signed in user inside the database

Returns:
   - 200 userObject associated with signed in user has been updated
   - 400 missing or invalid arguments
   - 401 access token could not be found
</code></pre></div>
<h4 id="sendfriendrequest">/sendFriendRequest<a class="headerlink" href="#sendfriendrequest" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Type:
   POST - creates a friend request in server database

Expects 1 arguments from body:
   receiverId: mongoose object id

Route description:
   creates a friend request in the database, setting the current user as the sender and the {userId} as the receiver

Returns:
   - 201 friendRequestObject created and saved in the database
   - 400 missing or invalid arguments
   - 401 access token could not be found
   - 409 friendRequestObject or friendshipObject already exists in the database

payload: friendRequestObject
</code></pre></div>
<h4 id="processfriendrequest">/processFriendRequest<a class="headerlink" href="#processfriendrequest" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Type:
   POST - logs user out

Expects 2 arguments from body:
   requestId: mongoose object id
   accept: boolean

Route description:
   - Checks the validity of the friend request
   - If accept is true, create a friendship object between the sender and receiver of the request
   - If accept is false, delete the friend request from the database

Returns:
   - 201 friendRequestObject has been deleted and friendObject has been created in the database
   - 204 friendRequestObject has been deleted from the database
   - 400 missing or invalid arguments
   - 401 client did not provide a valid access token
   - 403 client does not have write access to the friendRequestObject
   - 404 requestId not found in database
   - 409 the approved friendship already exists in the database

payload: friendshipObject
</code></pre></div>
<h4 id="deletefriendrequest">/deleteFriendRequest<a class="headerlink" href="#deletefriendrequest" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Type:
   POST - deletes a friendship object from the database

Expects 1 argument from body:
   relationshipId: mongoose object id

Route description:
   - Deletes the friendship object from the database

Return:
   - 204 friendshipObject removed from databases
   - 400 missing or invalid arguments
   - 401 client did not provide a valid access token
   - 403 client doesn&#39;t have write access to the friendship object
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>